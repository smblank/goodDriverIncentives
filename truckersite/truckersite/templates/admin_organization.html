<!DOCTYPE html>

<html lang = "en-US">
<meta charset = "UTF-8">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <title> Organizations </title>

    <!-- Links the .css file -->
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/admin_organization.css' %}">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <script>
        function remove(){
            if(document.getElementById("pointchanges").value != "none"){
                $('#removereason').modal('show');
            }
        }

        function edit(){
            if(document.getElementById("pointchanges").value != "none"){
                $('#editreason').modal('show');
            }
        }

        function removeSponsor(){
            if(document.getElementById("sponsorsdp").value != "none"){
                $('#removesponsor').modal('show');
            }
        }

        function editSponsor(){
            if(document.getElementById("sponsorsdp").value != "none"){
                $('#editsponsor').modal('show');
            }
        }

        function removeDriver(){
            if(document.getElementById("driversdp").value != "none"){
                $('#removedriver').modal('show');
            }
        }

        function editDriver(){
            if(document.getElementById("driversdp").value != "none"){
                $('#editdriver').modal('show');
            }
        }

        function editDriverPoints(){
            if(document.getElementById("driversdp").value != "none"){
                $('#editdriverpoints').modal('show');
            }
        }
    </script>


</head>

<body>
    
    <div class = "container-fluid">

        <!-- Credit for navbar: https://getbootstrap.com/docs/4.1/components/navbar/-->
        <nav class = "navbar navbar-expand-md navbar-light fixed-top" id = "header">
            <ul class = "navbar-nav w-100 justify-content-between">
                <li class = "nav-item dropdown">
                    <a class = "nav-link dropdown-toggle" id = "menubutton" role = "button" data-toggle = "dropdown" aria-haspopup = "true" aria-expanded = "false"> Menu </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class = "dropdown-item" href = "{% url 'adminOrgs' %}"> Organizations </a>
                        <!-- <a class = "dropdown-item" href = "admin_notifications.html"> Notifications </a> -->
                        <a class = "dropdown-item" href = "{% url 'adminReportGeneration'%}"> Generate Reports </a>
                        <!-- <a class = "dropdown-item" href = "admin_view_issues.html"> Issues </a> -->
                        <a class = "dropdown-item" href = "{% url 'logout' %}"> Logout </a>
                    </div>
                </li>

                <li class = "nav-item active">
                    <a class = "nav-link" href = "{% url 'adminDash' %}" id = "title"> Good Driver Incentive Program </a>
                </li>

                <a class = "navbar-brand" href = "{% url 'adminProfile'%}">
                    <img src = "Defaultpfp.png" width = "30" height = "30">
                </a>
            </ul>
        </nav>
        

        <div class = "row">
            <div class = "col-md-3">
                <form method = "Post" action = "{% url 'getAdminOrgChoice' %}">
                    {% csrf_token %}
                    <select class = "form-control form-control-lg" id = "organizations" name = "orgs" style = "margin-bottom: 1.5%;">
                        <option value = "none"> Select an Organization </option>

                        {% for org in orgs %}
                            <option value = {{org.id}}>{{org.name}}</option>
                        {% endfor %}
                    </select>
                    <button id = "submit"> Submit </button>
                </form>

                <p class = "sectionheader" style = "margin-top: 6%;"> General Organization Settings </p>
                <a class = "settingname" href = "#changeorglogo"> Change Organization Logo </a> <br>
                <a class = "settingname" href = "#pointchange"> Reasons for Point Changes </a> <br>
                <a class = "settingname" href = "#newpointchange"> New Reason for Point Changes </a> <br>
                <a class = "settingname" href = "#value"> Point Value </a> <br>
                <a class = "settingname" href = "#creditcard"> Credit Card </a> <br>
                <a class = "settingname" href = "#billingaddress"> Billing Address </a> <br>

                <p class = "sectionheader" style = "margin-top: 6%;"> Organization Employees </p>
                <a class = "settingname" href = "#orgsponsors"> Sponsors </a> <br>
                <a class = "settingname" href = "#addsponsor"> Add Sponsor </a> <br>
                <a class = "settingname" href = "#orgdrivers"> Drivers </a> <br>
            
                <p class = "sectionheader" style = "margin-top: 6%;"> Catalog </p>
                <a class = "settingname" href = #catalog> Create Catalog </a> <br>
                <a class = "settingname" href = #current> Current Catalog </a>
            </div>

            <div class = "col-md-9 h-100">
                <p class = "setting" style = "top: 3%;"> Change Organization Logo </p>
                <img id = "changeorglogo" src = "{% static logo %}"> <br>
                <form method="Post" enctype="multipart/form-data" action="{% url 'getNewOrgLogo' %}">
                    {% csrf_token %}
                    <input type="file" id="logo" name="logo" />
                    <button id="submit" type="file"> Upload Image </button>
                </form>

                <p class = "setting" id = "pointchange" style = "margin-top: 1.5%;"> Reasons for Point Changes </p>
                <form method="Post" action="{% url 'removeReason' %}">
                    {% csrf_token %}
                    <select class="form-control form-control-lg" id="pointchanges" name="reason" style="margin-bottom: 1.5%;">
                        <option value = "none"> Select a Reason </option>

                        {% for reason in reasons %}
                            <option value = {{reason.id}}>{{reason.desc}}</option>
                        {% endfor %}
                    </select>
                    <button id="remove"> Remove Reason </button>
                </form>
                <button id = "edit" onclick = "edit()"> Edit Reason </button>

                <p class = "setting" id = "newpointchange" style = "margin-top: 1.5%;"> New Reason for Point Changes </p>
                 <form method="Post" action="{% url 'getNewPointChange' %}">
                    {% csrf_token %}
                    <input type="text" class="settingtext" id="numpoints" name="numPoints" placeholder="Number of Points to be Added or Removed" style="font-size: 140%;"> <br>
                    <textarea id="newdescription" name="description" placeholder="Description"></textarea> <br>
                    <button class="save" id="savepointchange"> <i class = "fa fa-save"></i> </button>
                </form>

                <p class = "setting" id = "value" style = "margin-top: 1.5%;"> Point Value </p>
                <form method="Post" action="{% url 'updatePointConversion' %}">
                    {% csrf_token %}
                    <input type="text" class="valuechanges" id="dollars" name="dollars" placeholder="Dollars (Ex. - 2.25)" style="font-size: 200%;">
                    <h1 style="margin-left: 8%;"> = </h1>
                    <input type="text" class="valuechanges" id="points" name="points" placeholder="Points (Ex. - 1.25)" style="font-size: 200%;">
                    <button class="save" id="savepointchange"> <i class = "fa fa-save"></i> </button>
                </form>

                <p class = "setting" id = "creditcard" style = "margin-top: 1.5%;"> Credit Card </p>
                <form method="Post" action="{% url 'updatePaymentInfo' %}">
                    {% csrf_token %}
                    <input type="text" class="settingtext" id="name" name="ccName" placeholder="Name on Card"> <br>
                    <input type="text" class="settingtext" id="cardnum" name="ccNum" placeholder="Card Number" maxlength="16"> <br>
                    <input type="text" class="settingtext" id="securitycode" name="ccSec" placeholder="Security Code" maxlength="3"> <br>
                    <input type="text" class="settingtext" id="exp" placeholder="Expiration Date (mm/yy)" name="ccDate" maxlength="5">

                    <p class="setting" id="bilingaddress" style="margin-top: 1.5%;"> Billing Address </p>
                    <input type="text" class="settingtext" id="addressline1" name="addr1" placeholder="Address Line 1"> <br>
                    <input type="text" class="settingtext" id="addressline2" name="addr2" placeholder="Address Line 2"> <br>
                    <input type="text" class="settingtext" id="city" name="city" placeholder="City"> <br>
                    <input type="text" class="settingtext" id="state" maxlength="2" name="state" placeholder="State"> <br>
                    <input type="text" class="settingtext" maxlength=5 name="zip" placeholder="Zip">
                    <button class="save" id="savePayment"> <i class = "fa fa-save"></i> </button>
                </form>

                <p class = "setting" id = "sponsors" style = "margin-top: 1.5%;"> Sponsors </p>
                <form method="Post" action="{% url 'removeSponsor' %}">
                    {% csrf_token %}
                    <select class="form-control form-control-lg" id="sponsorsdp" name="sponsor" style="margin-bottom: 1.5%;">
                        <option value = "none"> Select a Sponsor </option>

                        {% for sponsor in sponsors %}
                            <option value = {{sponsor.id}}>{{sponsor.name}}</option>
                        {% endfor %}
                    </select>

                    <button id="remove"> Remove Sponsor </button>
                </form>
                <button id = "edit" onclick = "editSponsor()"> Edit Sponsor Info </button>

                <p class = "setting" id = "addsponsor" style = "margin-top: 1.5%;"> Add Sponsor </p>
                <form method="Post" action="{% url 'addNewSponsor' %}">
                    {% csrf_token %}
                    <input type="text" class="settingtext" id="newsponsoremail" name="email" placeholder="Email"> <br>
                    <input type="text" class="settingtext" id="name" name="name" placeholder="Name"> <br>
                    <button class="save" id="addsponsor"> Add Sponsor </button>
                </form>

                <p class = "setting" id = "drivers" style = "margin-top: 1.5%;"> Drivers </p>
                <form method="Post" action="{% url 'removeDriver' %}">
                    {% csrf_token %}
                    <select class="form-control form-control-lg" id="driversdp" name="driver" style="margin-bottom: 1.5%;">
                        <option value = "none"> Select a Driver </option>

                        {% for driver in drivers %}
                            <option value = {{driver.id}}>{{driver.name}}</option>
                        {% endfor %}
                    </select>

                    <button id="remove" onclick="removeDriver()"> Remove Driver </button>
                </form>
                <button id = "edit" onclick = "editDriver()"> Edit Driver Info </button>
                <button id = "editpoints" onclick = "editDriverPoints()"> Edit Driver Points </button>

                <p class = "setting" id = "catalog" style = "margin-top: 1.5%;"> Create Catalog </p>
                <!-- Source for Search Bar: https://getbootstrap.com/docs/4.1/components/input-group/ -->
                <div class = "input-group" style = "width: 100%; margin-bottom: 2%;">
                    <input type = "text" class = "form-control" placeholder = "Enter Keywords to Filter Your Catalog" aria-label = "search" aria-describedby = "button-addon2">
                    <div class = "input-group-append">
                        <button class = "btn btn-outline-secondary" type = "button" id = "search"> Enter </button>
                    </div>
                </div>

                <button id = "create"> Create Catalog </button>
                <p class = "setting" id = "current" style = "margin-top: 1.5%;"> Current Catalog </p>
                <!-- As keywords are entered display them below the button; template below-->
                <!-- <div>
                    <h5>Keyword <span> <button class = "delete"> <i class = "fa fa-window-close"></i> </button> </span></h5>
                </div> -->
                

                <!-- Modal source: https://getbootstrap.com/docs/4.1/components/modal/ -->
                <!-- Modal for deleteing a reason -->
                <div class = "modal fade" id = "removereason" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
                    <div class = "modal-dialog" role = "document">
                        <div class = "modal-content">
                            <div class = "modal-header">
                                <h5 class = "modal-title" id="exampleModalLabel">Remove Reason</h5>
                                <button type = "button" class = "close" data-dismiss = "modal" aria-label = "Close">
                                  <span aria-hidden = "true">&times;</span>
                                </button>
                              </div>
                              <div class = "modal-body">
                                  Are you sure you want to remove this reason?
                              </div>
                              <div class = "modal-footer">
                                  <button type = "button" class = "btn btn-secondary" data-dismiss = "modal" style = "background-color: #EDA1A1; border-color: #EDA1A1; color: black;"> No </button>
                                  <button type = "button" id = "delete" style = "background-color: #A1EDA7; border-color: #A1EDA7; color: black;" class = "btn btn-primary"> Yes </button>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal source: https://getbootstrap.com/docs/4.1/components/modal/ -->
                <!-- Modal for editing a reason -->
                <div class = "modal fade" id = "editreason" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
                    <div class = "modal-dialog" role = "document">
                        <div class = "modal-content">
                                <div class = "modal-header">
                                    <h5 class = "modal-title" id = "exampleModalLabel">Edit Reason</h5>
                                    <button type = "button" class = "close" data-dismiss = "modal" aria-label = "Close">
                                        <span aria-hidden = "true">&times;</span>
                                    </button>
                                </div>
                                <div class = "modal-body">
                                    <input type = "text" class = "editing" id = "title" style = "margin-top: 2%;" placeholder = "Title">
                                    <input type = "text" class = "editing" id = "numpoints" placeholder = "Number of Points to be Added or Removed" style = "font-size: 110%;"> <br>
                                    <textarea id = "description" placeholder = "Description"></textarea>
                                </div>
                                <div class = "modal-footer">
                                    <button type = "button" class = "btn btn-secondary" style = "background-color: #EDA1A1; border-color: #EDA1A1; color: black;" data-dismiss = "modal"> Cancel</button>
                                    <button type = "submit" id = "save"  style = "background-color: #A1EDA7; border-color: #A1EDA7; color: black;" class = "btn btn-primary">Save Changes</button>
                                </div>
                        </div>
                    </div>
                </div>

                <!-- Modal source: https://getbootstrap.com/docs/4.1/components/modal/ -->
                <!-- Modal for deleteing a sponsor -->
                <div class = "modal fade" id = "removesponsor" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
                    <div class = "modal-dialog" role = "document">
                        <div class = "modal-content">
                            <div class = "modal-header">
                                <h5 class = "modal-title" id="exampleModalLabel"> Remove Sponsor</h5>
                                <button type = "button" class = "close" data-dismiss = "modal" aria-label = "Close">
                                  <span aria-hidden = "true">&times;</span>
                                </button>
                              </div>
                              <div class = "modal-body">
                                  Are you sure you want to remove this sponsor?
                              </div>
                              <div class = "modal-footer">
                                  <button type = "button" class = "btn btn-secondary" data-dismiss = "modal" style = "background-color: #EDA1A1; border-color: #EDA1A1; color: black;"> No </button>
                                  <button type = "button" id = "delete" style = "background-color: #A1EDA7; border-color: #A1EDA7; color: black;" class = "btn btn-primary"> Yes </button>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal source: https://getbootstrap.com/docs/4.1/components/modal/ -->
                <!-- Modal for editing sponsor info -->
                <div class = "modal fade" id = "editsponsor" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
                    <div class = "modal-dialog" role = "document">
                        <div class = "modal-content">
                                <div class = "modal-header">
                                    <h5 class = "modal-title" id = "exampleModalLabel">Edit Sponsor Info</h5>
                                    <button type = "button" class = "close" data-dismiss = "modal" aria-label = "Close">
                                        <span aria-hidden = "true">&times;</span>
                                    </button>
                                </div>
                                <div class = "modal-body">
                                    <input type = "text" class = "editing" id = "email" style = "margin-top: 2%;" placeholder = "Email"> <br> <br>
                                    <input type = "password" class = "editing" id = "password" placeholder = "Password" style = "font-size: 110%;"> <br>
                                    <input type = "password" class = "editing" id = "confirmpassword" placeholder = "Confirm Password" style = "font-size: 110%;">
                                </div>
                                <div class = "modal-footer">
                                    <button type = "button" class = "btn btn-secondary" style = "background-color: #EDA1A1; border-color: #EDA1A1; color: black;" data-dismiss = "modal"> Cancel</button>
                                    <button type = "submit" id = "save"  style = "background-color: #A1EDA7; border-color: #A1EDA7; color: black;" class = "btn btn-primary">Save Changes</button>
                                </div>
                        </div>
                    </div>
                </div>

                <!-- Modal source: https://getbootstrap.com/docs/4.1/components/modal/ -->
                <!-- Modal for deleteing a driver -->
                <div class = "modal fade" id = "removedriver" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
                    <div class = "modal-dialog" role = "document">
                        <div class = "modal-content">
                            <div class = "modal-header">
                                <h5 class = "modal-title" id="exampleModalLabel"> Remove Driver</h5>
                                <button type = "button" class = "close" data-dismiss = "modal" aria-label = "Close">
                                  <span aria-hidden = "true">&times;</span>
                                </button>
                              </div>
                              <div class = "modal-body">
                                  Are you sure you want to remove this driver?
                              </div>
                              <div class = "modal-footer">
                                  <button type = "button" class = "btn btn-secondary" data-dismiss = "modal" style = "background-color: #EDA1A1; border-color: #EDA1A1; color: black;"> No </button>
                                  <button type = "button" id = "delete" style = "background-color: #A1EDA7; border-color: #A1EDA7; color: black;" class = "btn btn-primary"> Yes </button>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal source: https://getbootstrap.com/docs/4.1/components/modal/ -->
                <!-- Modal for editing driver info -->
                <div class = "modal fade" id = "editdriver" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
                    <div class = "modal-dialog" role = "document">
                        <div class = "modal-content">
                            <div class = "modal-header">
                                <h5 class = "modal-title" id = "exampleModalLabel">Edit Driver Info</h5>
                                <button type = "button" class = "close" data-dismiss = "modal" aria-label = "Close">
                                    <span aria-hidden = "true">&times;</span>
                                </button>
                            </div>
                            <div class = "modal-body">
                                <input type = "text" class = "editing" id = "email" style = "margin-top: 2%;" placeholder = "Email"> <br> <br>
                                <input type = "password" class = "editing" id = "password" placeholder = "Password" style = "font-size: 110%;"> <br>
                                <input type = "password" class = "editing" id = "confirmpassword" placeholder = "Confirm Password" style = "font-size: 110%;">
                                <h5>Add driver to another sponsor</h5>
                                <select class = "form-control form-control-lg" id = "orgs" name = "orgs" style = "margin-bottom: 1.5%;">
                                    <option value = "none"> Select a Sponsor </option>
                                    
                                    {% for org in driverOrgs %}
                                        <option value = {{org.id}}>{{org.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class = "modal-footer">
                                <button type = "button" class = "btn btn-secondary" style = "background-color: #EDA1A1; border-color: #EDA1A1; color: black;" data-dismiss = "modal"> Cancel</button>
                                <button type = "submit" id = "save"  style = "background-color: #A1EDA7; border-color: #A1EDA7; color: black;" class = "btn btn-primary">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal source: https://getbootstrap.com/docs/4.1/components/modal/ -->
                <!-- Modal for editing driver points -->
                <div class = "modal fade" id = "editdriverpoints" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
                    <div class = "modal-dialog" role = "document">
                        <div class = "modal-content">
                            <div class = "modal-header">
                                <h5 class = "modal-title" id = "exampleModalLabel">Edit Driver Info</h5>
                                <button type = "button" class = "close" data-dismiss = "modal" aria-label = "Close">
                                    <span aria-hidden = "true">&times;</span>
                                </button>
                            </div>
                            <div class = "modal-body">
                                <select class = "form-control form-control-lg" id = "pointsdp" style = "margin-bottom: 1.5%;">
                                    <option value = "none"> Select a Reason </option>
                                </select>
                            </div>
                            <div class = "modal-footer">
                                <button type = "button" class = "btn btn-secondary" style = "background-color: #EDA1A1; border-color: #EDA1A1; color: black;" data-dismiss = "modal"> Cancel</button>
                                <button type = "submit" id = "save"  style = "background-color: #A1EDA7; border-color: #A1EDA7; color: black;" class = "btn btn-primary">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>


</body>

</html>